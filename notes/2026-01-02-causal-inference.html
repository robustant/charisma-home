<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Charisma | 因果推断入门</title>
  <link rel="stylesheet" href="../style.css">
</head>

<script>
// 等待 DOM 加载完成
document.addEventListener('DOMContentLoaded', function () {
  // 所有 <pre> 元素
  const pres = document.querySelectorAll('pre');

  pres.forEach(pre => {
    // 跳过不含 <code> 的 pre
    const code = pre.querySelector('code');
    if (!code) return;

    // 创建复制按钮
    const button = document.createElement('button');
    button.className = 'copy-button';
    button.textContent = '复制';
    button.setAttribute('aria-label', '复制代码');

    // 插入到 pre 内部
    pre.appendChild(button);

    // 复制逻辑
    button.addEventListener('click', () => {
      const text = code.innerText;

      // 使用 Clipboard API
      if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
          // 成功反馈
          button.textContent = '已复制';
          button.classList.add('copied');
          setTimeout(() => {
            button.textContent = '复制';
            button.classList.remove('copied');
          }, 2000);
        }).catch(err => {
          console.warn('复制失败:', err);
        });
      } else {
        // 降级方案（旧浏览器）
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        try {
          document.execCommand('copy');
          button.textContent = '已复制';
          button.classList.add('copied');
          setTimeout(() => {
            button.textContent = '复制';
            button.classList.remove('copied');
          }, 2000);
        } catch (err) {
          alert('复制失败，请手动选择代码复制');
        }
        document.body.removeChild(textarea);
      }
    });
  });
});
</script>

<body>
  <!-- 全局导航 -->
  <nav class="main-nav">
    <div class="nav-left">
      <ul class="main-nav-links">
        <li><a href="../index.html">主页</a></li>
        <li><a href="../self-introduction.html">自我介绍</a></li>
        <li><a href="../notes/">笔记</a></li>
      </ul>
    </div>

    <div class="nav-right">
      <button class="theme-toggle" aria-label="切换深色/浅色模式">
        <svg class="sun-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.758a.75.75 0 001.06-1.061l-1.59-1.59a.75.75 0 00-1.061 1.06l1.59 1.591z" />
        </svg>
        <svg class="moon-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z" />
        </svg>
      </button>

      <button class="hamburger" aria-label="切换导航菜单">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <div class="mobile-menu">
      <a href="../index.html">主页</a>
      <a href="../self-introduction.html">自我介绍</a>
      <a href="../notes/">笔记</a>
    </div>
  </nav>

  <!-- 标题区 -->
  <header class="hero">
    <div class="container">
      <h1 class="fade-in">因果推断入门</h1>
      <p class="subtitle fade-in-delay">从相关性到因果性：识别混杂偏倚与估计处理效应</p>
      <div class="every-note-meta fade-in-delay">
        <time class="time-label">2026-01-02</time>
        <span class="article-label">统计学 · 机器学习 · 公共政策</span>
      </div>
    </div>
  </header>

  <div class="container">
    <section class="card fade-in">
      <h2>为什么需要因果推断？</h2>
      <p>在公共管理实践中，决策者常面临关键问题：</p>
      <blockquote>
        “推行‘一网通办’政务服务 → 是否真正减少了群众办事时间？”<br>
        “向基层街道下放执法权 → 是否提升了城市环境治理效率？”
      </blockquote>
      <p>⚠️ 观察到的“相关性”可能由混杂因素驱动，而非政策本身。这正是 <strong>混杂偏倚（Confounding Bias）</strong> 的陷阱。</p>

      <h3>典型案例：政务数字化改革对办事效率的影响</h3>
      <p><strong>政策背景</strong>：某市2023年起在部分区试点“一网通办”平台，整合户籍、社保、税务等高频事项线上办理。</p>
      <p><strong>研究问题</strong>：该平台是否显著缩短了居民单次办事耗时（小时）？</p>

      <p><strong>潜在混杂变量</strong>：</p>
      <ul>
        <li><strong>区域经济发展水平</strong>：高收入区更可能被选为试点，且居民数字素养更高</li>
        <li><strong>原有政务大厅服务能力</strong>：服务差的区域更急需改革，但基线效率低</li>
        <li><strong>人口结构</strong>：年轻人口多的区更适应线上操作</li>
      </ul>
      <p>若忽略这些因素，可能将“区域优势”误判为“政策效果”。</p>

      <h3>因果识别策略：双重差分法（DID）</h3>
      <p>利用<strong>试点区 vs 非试点区</strong> 与 <strong>政策前 vs 政策后</strong> 的双重差异，控制不随时间变化的混杂因素。</p>

      <h4>Stata 实现：基础 DID 回归</h4>
      <pre><code class="language-stata">// 假设数据包含：
// - time: 2022（政策前）, 2023（政策后）
// - treat: 1=试点区, 0=非试点区
// - hours: 居民平均办事耗时（小时）

// 生成交互项
gen did = treat * (time == 2023)

// DID 回归
reg hours i.treat##i.time, vce(cluster district_id)

// 或等价写法
reg hours treat post did, vce(cluster district_id)
</code></pre>
      <p>✅ 核心系数 <code>did</code> 即为政策的平均处理效应（ATT）。聚类标准误（<code>cluster</code>）控制区级相关性。</p>

      <h3>小结</h3>
      <p>公共管理中的政策评估，本质是<strong>从观测数据中剥离因果效应</strong>。只有识别并控制混杂偏倚，才能避免“把相关当因果”，确保公共资源精准投放、政策设计科学有效。</p>
    </section>
  </div>

  <!-- 页脚 笔记分类 -->
  <footer class="footer">
    <div class="hit-links">
      <h3>笔记分类</h3>
      <div class="links-grid">
        <a href="#" aria-label="好文转载">好文转载</a>
        <a href="#" aria-label="编程实践">编程实践</a>
        <a href="#" aria-label="论文阅读">论文阅读</a>
        <a href="#" aria-label="读书心得">读书心得</a>
      </div>
    </div>
    <p class="hitu-slogan">规格严格，功夫到家</p>
    <p>© 2026 Charisma | 哈尔滨工业大学</p>
    <div class="social-links">
      <a href="https://github.com/robustant" target="_blank" aria-label="GitHub">🐙</a>
      <a href="mailto:25s010094@stu.hit.edu.cn" aria-label="发送邮件">✉️</a>
    </div>
  </footer>

  <script src="../dynamic.js"></script>
</body>
<!-- 语法高亮（国内 CDN） -->
<link href="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-okaidia.min.css" rel="stylesheet" />
<script src="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

<script>
  // 可选：确保语言文件从同一 CDN 加载
  Prism.plugins.autoloader.languages_path = 'https://fastly.jsdelivr.net/npm/prismjs@1.29.0/components/';
</script>

</html>
